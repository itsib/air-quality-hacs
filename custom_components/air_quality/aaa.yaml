# DOC: https://air.krasn.ru/
# Krasnoyarsk Pokrovsky code 3833

airvisual_sensors:
  rest:
    - resource: "https://air.krasn.ru/api/2.0/data?sites=3833"
      method: "GET"
      scan_interval: 3600
      headers:
        User-Agent: Home Assistant
        Content-Type: application/json
      sensor:
        - name: "Environment API Query"
          unique_id: environment_query
          value_template: "{{ value_json.status.message }}"
          json_attributes_path: "{{ value_json.data[0] }}"
          json_attributes:
            - aqi
            - iaqi
            - pm25
            - t
            - h
            - p
        - name: "Environment AQI Level 24h"
          unique_id: environment_aqi_level_24h
          value_template: "{{ value_json.data[0].aqi | float }}"
          device_class: aqi
        - name: "Environment AQI Level 1h"
          unique_id: environment_aqi_level_1h
          value_template: "{{ value_json.data[0].iaqi | float }}"
          device_class: aqi
        - name: "Environment PM2.5"
          unique_id: environment_pm2_5
          value_template: "{{ value_json.data[0].pm25 | float }}"
          unit_of_measurement: "µg/m³"
          device_class: pm25
        - name: "Environment Air Temperature"
          unique_id: environment_air_temperature
          value_template: "{{ value_json.data[0].t | float }}"
          unit_of_measurement: "°C"
          device_class: temperature
        - name: "Environment Air Humidity"
          unique_id: environment_air_humidity
          value_template: "{{ value_json.data[0].h | float }}"
          unit_of_measurement: "%"
          device_class: humidity